enum GrantFieldInputType {
  short_form
  long_form
  numeric
}

enum WorkspaceMemberAccessLevel {
  owner
  admin
  member
}

enum MilestoneState { 
  submitted,
  requested,
  approved
}

enum ApplicationState { 
  submitted,
  resubmit,
  approved,
  rejected
}

type Social @entity {
  id: ID!

  name: String!
  value: String!
}

type GrantField @entity {
  id: ID!
  title: String!
  inputType: GrantFieldInputType!
  possibleValues: [String!]
}

type GrantFieldAnswer @entity {
  id: ID!
  field: GrantField!
  value: String!
}

type Reward @entity {
  id: ID!
	asset: Bytes!
	committed: Int!
  alloted: Int!
  paid: Int!
}

type Grant @entity {
  id: ID!
  creatorId: Bytes!
	title: String!
  summary: String!
  details: String!
  reward: Reward!
  workspace: Workspace
  "ISO formatted date string"
  deadline: String
  fields: [GrantField!]!
  acceptingApplications: Boolean!

  metadataHash: String!
}

type WorkspaceMember @entity {
  "globally unique ID of the member"
  id: ID!
  "the ID of the member itself"
  actorId: Bytes!
  email: String
  accessLevel: WorkspaceMemberAccessLevel!
}

type Workspace @entity {
  id: ID!
  ownerId: Bytes!
  title: String!
  about: String!
  logoIpfsHash: String!
  coverImageIpfsHash: String!
  supportedNetworks: [Bytes!]!
  "in seconds since epoch"
  createdAtS: Int!
  "in seconds since epoch"
  updatedAtS: Int!

  metadataHash: String!
  members: [WorkspaceMember!]!
  socials: [Social!]!
}

type ApplicationMilestone @entity {
  id: ID!
  state: ApplicationMilestone!

  title: String!
}

type ApplicationMember @entity {
  id: ID!
  details: String!
}

type GrantApplication @entity {
  id: ID!

  grant: Grant!
  applicantId: Bytes!
  state: ApplicationState!
  details: String!
  fields: [GrantFieldAnswer!]!
  members: [ApplicationMember!]!

  milestones: [ApplicationMilestone!]!
}